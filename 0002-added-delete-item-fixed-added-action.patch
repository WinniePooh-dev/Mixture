From 9ac32a0b7b199d586c6831682fad0f4be1e00575 Mon Sep 17 00:00:00 2001
From: Roman Belotsvetov <rbelotsvetov88@yandex.ru>
Date: Sun, 9 Aug 2020 18:17:48 +0300
Subject: [PATCH 2/5] added delete item & fixed added action

---
 src/components/NotesList/index.js | 14 ++++++++++----
 src/redux/actions/notes.js        |  9 ++++++++-
 src/redux/reducers/notes.js       |  8 ++++++--
 3 files changed, 24 insertions(+), 7 deletions(-)

diff --git a/src/components/NotesList/index.js b/src/components/NotesList/index.js
index f4e7cff..3f53c5e 100644
--- a/src/components/NotesList/index.js
+++ b/src/components/NotesList/index.js
@@ -1,12 +1,12 @@
 import React from "react";
 import { connect } from "react-redux";
-import { addNote } from "../../redux/actions/notes";
+import { addNote, deleteNote } from "../../redux/actions/notes";
 
 import styles from "./styles.module.css";
 
 const enhance = connect(
   ({ notes }) => ({ notes }),
-  { addNote }
+  { addNote, deleteNote }
 );
 
 class NotesList extends React.Component {
@@ -18,7 +18,7 @@ class NotesList extends React.Component {
       <ul className={styles["note-list"]}>
         {this.props.notes.map((note, index) => {
           return (
-            <li key={index}>
+            <li key={index} onClick={() => this.onDeleteClick(index)}>
               {this.renderNote(note)}
               {this.renderAddButton(index)}
             </li>
@@ -41,8 +41,14 @@ class NotesList extends React.Component {
   );
 
   onAddButtonClick = e => {
+    e.stopPropagation()
     const text = window.prompt("Note text:");
-    text && this.props.addNote(text, e.target.dataset.index);
+    text && this.props.addNote(text);
+  };
+
+  onDeleteClick = idx => {
+    const confirm = window.confirm("Are you sure you want to delete this note?");
+    confirm && this.props.deleteNote(idx);
   };
 }
 
diff --git a/src/redux/actions/notes.js b/src/redux/actions/notes.js
index 056ef1f..23f9740 100644
--- a/src/redux/actions/notes.js
+++ b/src/redux/actions/notes.js
@@ -1,9 +1,16 @@
 export const ADD_NOTE = "ADD_NOTE";
+export const DELETE_NOTE = "DELETE_NOTE";
 
-export function addNote(text, afterIndex) {
+export function addNote(text) {
   return {
     type: ADD_NOTE,
     text,
+  };
+}
+
+export function deleteNote(afterIndex) {
+  return {
+    type: DELETE_NOTE,
     afterIndex
   };
 }
diff --git a/src/redux/reducers/notes.js b/src/redux/reducers/notes.js
index 5ad0640..027be1d 100644
--- a/src/redux/reducers/notes.js
+++ b/src/redux/reducers/notes.js
@@ -1,4 +1,4 @@
-import { ADD_NOTE } from "../actions/notes";
+import { ADD_NOTE, DELETE_NOTE } from "../actions/notes";
 
 const initState = ["note 1", "note 2", "note 3", "note 4"];
 
@@ -6,8 +6,12 @@ export default function(state = initState, action) {
   switch (action.type) {
     case ADD_NOTE:
       return [
-        ...state.slice(0, action.afterIndex + 1),
+        ...state,
         action.text,
+      ];
+    case DELETE_NOTE:
+      return [
+        ...state.slice(0, action.afterIndex),
         ...state.slice(action.afterIndex + 1)
       ];
     default:
-- 
2.28.0.windows.1

